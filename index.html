<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Gwei Notification</title>
    <link rel="stylesheet" href="static/styles.css"> <!-- Подключение стилей -->
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;500;700&display=swap" rel="stylesheet"> <!-- Подключение шрифта Roboto -->
    <script src="https://telegram.org/js/telegram-web-app.js"></script> <!-- Подключение Telegram Web Apps API -->
</head>
<body>
    <!-- Логотип компании -->
    <div class="half-logo">
        <img src="img/umbrella-2.png" alt="Logo"> <!-- Подключение логотипа -->
    </div>
    
    <div class="container">
        <h1>Поставить на уведомление</h1>
        <form id="gwei-form">
            <label for="gwei">Введите значение Gwei:</label>
            <input type="text" id="gwei" name="gwei_value" placeholder="Например: 10.5" required>
            <button class="glow-on-hover" type="submit"><span>Поставить на уведомление</span></button> <!-- Кнопка с эффектом свечения -->
        </form>
        <p id="response-message"></p>
    </div>

    <script>
        // Инициализация мини-приложения Telegram
        Telegram.WebApp.ready();

        // Получение данных пользователя
        const userId = Telegram.WebApp.initDataUnsafe.user?.id;
        console.log("User ID: ", userId);

        // Событие отправки формы
        document.getElementById('gwei-form').addEventListener('submit', function(e) {
            e.preventDefault();
            const gweiValue = document.getElementById('gwei').value;

            // Формируем данные для отправки
            const data = JSON.stringify({user_id: userId, gwei_value: gweiValue});
            
            // Отправляем данные в Telegram бот через Web Apps API
            Telegram.WebApp.sendData(data);
            
            // Отображаем сообщение об успешной отправке
            document.getElementById('response-message').textContent = 'Заявка отправлена!';
            
            // Закрываем веб-приложение после отправки данных
            setTimeout(() => Telegram.WebApp.close(), 1500);
        });
    </script>
</body>
</html>
